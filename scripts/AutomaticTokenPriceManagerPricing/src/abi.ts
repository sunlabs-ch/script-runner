import { ethers } from "ethers";
import { alchemyProvider } from "./providers";

const ZERO_ADDR = "0x0000000000000000000000000000000000000000";
const ADMIN_ADDR = "0x8cd4CF2Ca0e10E14bf152f132B2A2205A831D28B";
const TPC_ADDR = "0x8A46Eb6d66100138A5111b803189B770F5E5dF9a";

const automatedAdminABI = new ethers.utils.Interface([{ "inputs": [], "stateMutability": "nonpayable", "type": "constructor" }, { "inputs": [{ "internalType": "uint256", "name": "index", "type": "uint256" }], "name": "BadTransaction", "type": "error" }, { "inputs": [{ "internalType": "uint256", "name": "index", "type": "uint256" }, { "internalType": "bytes", "name": "returnData", "type": "bytes" }], "name": "BatchCallFailed", "type": "error" }, { "inputs": [{ "internalType": "bytes", "name": "returnData", "type": "bytes" }], "name": "CallFailed", "type": "error" }, { "inputs": [], "name": "CannotRemoveLastAdmin", "type": "error" }, { "inputs": [{ "internalType": "uint256", "name": "expected", "type": "uint256" }, { "internalType": "uint256", "name": "given", "type": "uint256" }], "name": "DifferentValue", "type": "error" }, { "inputs": [], "name": "Locked", "type": "error" }, { "inputs": [], "name": "NoChange", "type": "error" }, { "inputs": [], "name": "NotAuthorized", "type": "error" }, { "inputs": [], "name": "NotEnoughValue", "type": "error" }, { "inputs": [], "name": "PermanentRole", "type": "error" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": true, "internalType": "address", "name": "_contract", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }, { "indexed": false, "internalType": "bytes", "name": "data", "type": "bytes" }], "name": "ContractCall", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "bool", "name": "state", "type": "bool" }], "name": "LockToggle", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": true, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }], "name": "RoleAdd", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }, { "indexed": false, "internalType": "string", "name": "name", "type": "string" }], "name": "RoleCreate", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }], "name": "RoleDestroy", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": true, "internalType": "address", "name": "user", "type": "address" }, { "indexed": false, "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }], "name": "RoleRemove", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }, { "indexed": false, "internalType": "string", "name": "name", "type": "string" }], "name": "RoleRename", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": true, "internalType": "address", "name": "_contract", "type": "address" }, { "indexed": true, "internalType": "bytes4", "name": "functionSig", "type": "bytes4" }, { "indexed": false, "internalType": "enum AutomatedAdmin.Roles[]", "name": "_roles", "type": "uint8[]" }], "name": "SetPermissions", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": true, "internalType": "bytes32", "name": "_hash", "type": "bytes32" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }, { "indexed": false, "internalType": "bytes", "name": "data", "type": "bytes" }, { "indexed": false, "internalType": "string", "name": "description", "type": "string" }], "name": "TransactionQueue", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": true, "internalType": "bytes32", "name": "_hash", "type": "bytes32" }], "name": "TransactionSend", "type": "event" }, { "inputs": [{ "internalType": "address", "name": "_contract", "type": "address" }, { "internalType": "bytes", "name": "data", "type": "bytes" }], "name": "contractCall", "outputs": [{ "internalType": "bytes", "name": "", "type": "bytes" }], "stateMutability": "payable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "user", "type": "address" }, { "internalType": "address", "name": "_contract", "type": "address" }, { "internalType": "bytes4", "name": "functionSig", "type": "bytes4" }], "name": "getCallable", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_contract", "type": "address" }, { "internalType": "bytes4", "name": "functionSig", "type": "bytes4" }], "name": "getPermissions", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getRolesList", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "user", "type": "address" }], "name": "getRolesUser", "outputs": [{ "internalType": "string", "name": "list", "type": "string" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "_hash", "type": "bytes32" }], "name": "getTransaction", "outputs": [{ "components": [{ "internalType": "address", "name": "addressCreator", "type": "address" }, { "internalType": "address", "name": "addressTo", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }, { "internalType": "bytes", "name": "data", "type": "bytes" }, { "internalType": "string", "name": "description", "type": "string" }], "internalType": "struct AutomatedAdmin.Transaction", "name": "", "type": "tuple" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "lock", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "user", "type": "address" }, { "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }], "name": "roleAdd", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }, { "internalType": "string", "name": "name", "type": "string" }], "name": "roleCreate", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }], "name": "roleDestroy", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "user", "type": "address" }, { "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }], "name": "roleRemove", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "enum AutomatedAdmin.Roles", "name": "role", "type": "uint8" }, { "internalType": "string", "name": "name", "type": "string" }], "name": "roleRename", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_contract", "type": "address" }, { "internalType": "bytes4", "name": "functionSig", "type": "bytes4" }, { "internalType": "enum AutomatedAdmin.Roles[]", "name": "_roles", "type": "uint8[]" }], "name": "setPermissions", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }, { "internalType": "bytes", "name": "data", "type": "bytes" }, { "internalType": "string", "name": "description", "type": "string" }], "name": "transactionQueue", "outputs": [{ "internalType": "bytes32", "name": "_hash", "type": "bytes32" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "bytes32", "name": "_hash", "type": "bytes32" }], "name": "transactionSend", "outputs": [{ "internalType": "bool", "name": "success", "type": "bool" }, { "internalType": "bytes", "name": "returnData", "type": "bytes" }], "stateMutability": "payable", "type": "function" }, { "inputs": [{ "internalType": "bytes32[]", "name": "hashes", "type": "bytes32[]" }], "name": "transactionSendBatch", "outputs": [{ "internalType": "bytes[]", "name": "returnData", "type": "bytes[]" }], "stateMutability": "payable", "type": "function" }, { "inputs": [], "name": "unlock", "outputs": [], "stateMutability": "nonpayable", "type": "function" }]);

const tokenPriceControllerABI = new ethers.utils.Interface([{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"AlreadyExists","type":"error"},{"inputs":[],"name":"BadManager","type":"error"},{"inputs":[],"name":"DoesntExist","type":"error"},{"inputs":[],"name":"TimerExpired","type":"error"},{"inputs":[],"name":"Unauthorized","type":"error"},{"inputs":[],"name":"UnlockDestruction","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"manager","type":"address"},{"indexed":true,"internalType":"string","name":"symbol","type":"string"}],"name":"ManagerAdd","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"manager","type":"address"},{"indexed":true,"internalType":"string","name":"symbol","type":"string"}],"name":"ManagerRemove","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"manager","type":"address"},{"indexed":true,"internalType":"string","name":"symbol","type":"string"}],"name":"ManagerUpgrade","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"address","name":"oldOwner","type":"address"}],"name":"OwnerConfirm","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnerTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"sender","type":"address"}],"name":"SelfDestruct","type":"event"},{"inputs":[],"name":"destroyContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"symbol","type":"string"}],"name":"getManager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"manager","type":"address"}],"name":"managerAdd","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"manager","type":"address"}],"name":"managerRemove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"manager","type":"address"}],"name":"managerUpgrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ownerConfirm","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"ownerNew","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_ownerNew","type":"address"}],"name":"ownerTransfer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"ownerTransferTimeout","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"symbol","type":"string"}],"name":"symbolRemove","outputs":[],"stateMutability":"nonpayable","type":"function"}]);

const tokenPriceManagerABI = new ethers.utils.Interface([{ "inputs": [{ "internalType": "address", "name": "_tokenPrimary", "type": "address" }, { "internalType": "address", "name": "_tokenDenominator", "type": "address" }], "stateMutability": "nonpayable", "type": "constructor" }, { "inputs": [], "name": "AddressNotContract", "type": "error" }, { "inputs": [], "name": "AlreadySet", "type": "error" }, { "inputs": [], "name": "MathOverflow", "type": "error" }, { "inputs": [], "name": "NotInitialized", "type": "error" }, { "inputs": [], "name": "NotTokenset", "type": "error" }, { "inputs": [], "name": "RequiresOverride", "type": "error" }, { "inputs": [], "name": "TimerExpired", "type": "error" }, { "inputs": [], "name": "TokensetContractError", "type": "error" }, { "inputs": [], "name": "TokensetPricing", "type": "error" }, { "inputs": [], "name": "TransferFailed", "type": "error" }, { "inputs": [], "name": "Unauthorized", "type": "error" }, { "inputs": [], "name": "UnlockDestruction", "type": "error" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "address", "name": "primary", "type": "address" }, { "indexed": false, "internalType": "address", "name": "denominator", "type": "address" }], "name": "ContractCreation", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "address", "name": "oldOwner", "type": "address" }], "name": "OwnerConfirm", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnerTransfer", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "sender", "type": "address" }], "name": "SelfDestruct", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "_price", "type": "uint256" }], "name": "SetPrice", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "uint8", "name": "fee", "type": "uint8" }], "name": "SetPriceFeeSpread", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "endTime", "type": "uint256" }], "name": "SetPriceOverride", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "uint80", "name": "threshold", "type": "uint80" }], "name": "SetSwdThreshold", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "bool", "name": "_isTokenset", "type": "bool" }], "name": "SetTokenset", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": true, "internalType": "address", "name": "token", "type": "address" }], "name": "WithdrawToken", "type": "event" }, { "inputs": [], "name": "destroyContract", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "enum TokenPriceManager.PriceType", "name": "priceType", "type": "uint8" }], "name": "getPrice", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }, { "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getTokenDenominator", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getTokenPrimary", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "_price", "type": "uint256" }, { "internalType": "bool", "name": "_isTokenset", "type": "bool" }, { "internalType": "uint8", "name": "_fee", "type": "uint8" }, { "internalType": "uint80", "name": "_threshold", "type": "uint80" }], "name": "initialize", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "ownerConfirm", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "ownerNew", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_ownerNew", "type": "address" }], "name": "ownerTransfer", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "ownerTransferTimeout", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "price", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "priceChangeModifier", "outputs": [{ "internalType": "uint40", "name": "expiration", "type": "uint40" }, { "internalType": "bytes27", "name": "priceModifier", "type": "bytes27" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "_price", "type": "uint256" }], "name": "setPrice", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint8", "name": "_fee", "type": "uint8" }], "name": "setPriceFeeSpread", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "setPriceOverride", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint80", "name": "_threshold", "type": "uint80" }], "name": "setSwdThreshold", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "bool", "name": "_isTokenset", "type": "bool" }], "name": "setTokenset", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "slot0", "outputs": [{ "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "uint80", "name": "swdThreshold", "type": "uint80" }, { "internalType": "uint8", "name": "pricePercentFeeSpread", "type": "uint8" }, { "internalType": "bool", "name": "isTokenset", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_token", "type": "address" }], "name": "withdrawToken", "outputs": [], "stateMutability": "nonpayable", "type": "function" }]);

const setTokenABI = new ethers.utils.Interface([{ "inputs": [{ "internalType": "address[]", "name": "_components", "type": "address[]" }, { "internalType": "int256[]", "name": "_units", "type": "int256[]" }, { "internalType": "address[]", "name": "_modules", "type": "address[]" }, { "internalType": "contract IController", "name": "_controller", "type": "address" }, { "internalType": "address", "name": "_manager", "type": "address" }, { "internalType": "string", "name": "_name", "type": "string" }, { "internalType": "string", "name": "_symbol", "type": "string" }], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "owner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "spender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Approval", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_component", "type": "address" }], "name": "ComponentAdded", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_component", "type": "address" }], "name": "ComponentRemoved", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_component", "type": "address" }, { "indexed": false, "internalType": "int256", "name": "_realUnit", "type": "int256" }], "name": "DefaultPositionUnitEdited", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_component", "type": "address" }, { "indexed": true, "internalType": "address", "name": "_positionModule", "type": "address" }, { "indexed": false, "internalType": "bytes", "name": "_data", "type": "bytes" }], "name": "ExternalPositionDataEdited", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_component", "type": "address" }, { "indexed": true, "internalType": "address", "name": "_positionModule", "type": "address" }, { "indexed": false, "internalType": "int256", "name": "_realUnit", "type": "int256" }], "name": "ExternalPositionUnitEdited", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_target", "type": "address" }, { "indexed": true, "internalType": "uint256", "name": "_value", "type": "uint256" }, { "indexed": false, "internalType": "bytes", "name": "_data", "type": "bytes" }, { "indexed": false, "internalType": "bytes", "name": "_returnValue", "type": "bytes" }], "name": "Invoked", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "_newManager", "type": "address" }, { "indexed": false, "internalType": "address", "name": "_oldManager", "type": "address" }], "name": "ManagerEdited", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_module", "type": "address" }], "name": "ModuleAdded", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_module", "type": "address" }], "name": "ModuleInitialized", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_module", "type": "address" }], "name": "ModuleRemoved", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_module", "type": "address" }], "name": "PendingModuleRemoved", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_component", "type": "address" }, { "indexed": true, "internalType": "address", "name": "_positionModule", "type": "address" }], "name": "PositionModuleAdded", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "_component", "type": "address" }, { "indexed": true, "internalType": "address", "name": "_positionModule", "type": "address" }], "name": "PositionModuleRemoved", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "int256", "name": "_newMultiplier", "type": "int256" }], "name": "PositionMultiplierEdited", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Transfer", "type": "event" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }], "name": "addComponent", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }, { "internalType": "address", "name": "_positionModule", "type": "address" }], "name": "addExternalPositionModule", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_module", "type": "address" }], "name": "addModule", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "address", "name": "spender", "type": "address" }], "name": "allowance", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "approve", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "account", "type": "address" }], "name": "balanceOf", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_account", "type": "address" }, { "internalType": "uint256", "name": "_quantity", "type": "uint256" }], "name": "burn", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "name": "components", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "controller", "outputs": [{ "internalType": "contract IController", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "decimals", "outputs": [{ "internalType": "uint8", "name": "", "type": "uint8" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "subtractedValue", "type": "uint256" }], "name": "decreaseAllowance", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }, { "internalType": "int256", "name": "_realUnit", "type": "int256" }], "name": "editDefaultPositionUnit", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }, { "internalType": "address", "name": "_positionModule", "type": "address" }, { "internalType": "bytes", "name": "_data", "type": "bytes" }], "name": "editExternalPositionData", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }, { "internalType": "address", "name": "_positionModule", "type": "address" }, { "internalType": "int256", "name": "_realUnit", "type": "int256" }], "name": "editExternalPositionUnit", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "int256", "name": "_newMultiplier", "type": "int256" }], "name": "editPositionMultiplier", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "getComponents", "outputs": [{ "internalType": "address[]", "name": "", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }], "name": "getDefaultPositionRealUnit", "outputs": [{ "internalType": "int256", "name": "", "type": "int256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }, { "internalType": "address", "name": "_positionModule", "type": "address" }], "name": "getExternalPositionData", "outputs": [{ "internalType": "bytes", "name": "", "type": "bytes" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }], "name": "getExternalPositionModules", "outputs": [{ "internalType": "address[]", "name": "", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }, { "internalType": "address", "name": "_positionModule", "type": "address" }], "name": "getExternalPositionRealUnit", "outputs": [{ "internalType": "int256", "name": "", "type": "int256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getModules", "outputs": [{ "internalType": "address[]", "name": "", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getPositions", "outputs": [{ "components": [{ "internalType": "address", "name": "component", "type": "address" }, { "internalType": "address", "name": "module", "type": "address" }, { "internalType": "int256", "name": "unit", "type": "int256" }, { "internalType": "uint8", "name": "positionState", "type": "uint8" }, { "internalType": "bytes", "name": "data", "type": "bytes" }], "internalType": "struct ISetToken.Position[]", "name": "", "type": "tuple[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }], "name": "getTotalComponentRealUnits", "outputs": [{ "internalType": "int256", "name": "", "type": "int256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "addedValue", "type": "uint256" }], "name": "increaseAllowance", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "initializeModule", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_target", "type": "address" }, { "internalType": "uint256", "name": "_value", "type": "uint256" }, { "internalType": "bytes", "name": "_data", "type": "bytes" }], "name": "invoke", "outputs": [{ "internalType": "bytes", "name": "_returnValue", "type": "bytes" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }], "name": "isComponent", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }, { "internalType": "address", "name": "_module", "type": "address" }], "name": "isExternalPositionModule", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_module", "type": "address" }], "name": "isInitializedModule", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "isLocked", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_module", "type": "address" }], "name": "isPendingModule", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "lock", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "locker", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "manager", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_account", "type": "address" }, { "internalType": "uint256", "name": "_quantity", "type": "uint256" }], "name": "mint", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "moduleStates", "outputs": [{ "internalType": "enum ISetToken.ModuleState", "name": "", "type": "uint8" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "name": "modules", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "name", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "positionMultiplier", "outputs": [{ "internalType": "int256", "name": "", "type": "int256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }], "name": "removeComponent", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_component", "type": "address" }, { "internalType": "address", "name": "_positionModule", "type": "address" }], "name": "removeExternalPositionModule", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_module", "type": "address" }], "name": "removeModule", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_module", "type": "address" }], "name": "removePendingModule", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_manager", "type": "address" }], "name": "setManager", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "symbol", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "totalSupply", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "transfer", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "sender", "type": "address" }, { "internalType": "address", "name": "recipient", "type": "address" }, { "internalType": "uint256", "name": "amount", "type": "uint256" }], "name": "transferFrom", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "unlock", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "stateMutability": "payable", "type": "receive" }]);

const erc20TokenABI = new ethers.utils.Interface([{ 'inputs': [{ 'internalType': 'address', 'name': 'account', 'type': 'address' }], 'name': 'balanceOf', 'outputs': [{ 'internalType': 'uint256', 'name': '', 'type': 'uint256' }], 'stateMutability': 'view', 'type': 'function', 'constant': true }, { 'inputs': [], 'name': 'decimals', 'outputs': [{ 'internalType': 'uint8', 'name': '', 'type': 'uint8' }], 'stateMutability': 'view', 'type': 'function', 'constant': true }, { 'inputs': [], 'name': 'symbol', 'outputs': [{ 'internalType': 'string', 'name': '', 'type': 'string' }], 'stateMutability': 'view', 'type': 'function', 'constant': true }, { 'inputs': [], 'name': 'totalSupply', 'outputs': [{ 'internalType': 'uint256', 'name': '', 'type': 'uint256' }], 'stateMutability': 'view', 'type': 'function', 'constant': true }]);

export const automatedAdmin =
	new ethers.Contract(ADMIN_ADDR, automatedAdminABI, alchemyProvider);
export const tokenPriceController =
	new ethers.Contract(TPC_ADDR, tokenPriceControllerABI, alchemyProvider);
export const tokenPriceManager =
	new ethers.Contract(ZERO_ADDR, tokenPriceManagerABI, alchemyProvider);
export const setToken =
	new ethers.Contract(ZERO_ADDR, setTokenABI, alchemyProvider);
export const erc20Token =
	new ethers.Contract(ZERO_ADDR, erc20TokenABI, alchemyProvider);